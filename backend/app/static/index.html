<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Phish Aggregator - 钓鱼网站检测聚合平台</title>

  <!-- 样式文件 -->
  <link rel="stylesheet" href="/static/css/style.css">

  <!-- 图标库 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <header>
    <div class="logo">PA</div>
    <div>
      <h1>Phish Aggregator</h1>
      <div class="subtitle">钓鱼网站检测聚合平台</div>
    </div>
  </header>

  <main>
    <aside>
      <section>
        <h2><i class="fas fa-cog"></i> 配置选项</h2>

        <!-- URL输入 -->
        <div class="form-group">
          <label for="urls">
            待检测URL（每行一个）
            <button class="btn-icon" onclick="HistoryManager.show()" title="查看历史记录">
              <i class="fas fa-history"></i>
            </button>
          </label>
          <textarea id="urls" placeholder="请输入要检测的URL，每行一个..."></textarea>
        </div>

        <!-- 阈值设置 -->
        <div class="form-group">
          <label for="threshold">检测阈值</label>
          <div class="threshold-group">
            <input type="range" id="threshold" min="0" max="1" step="0.01" value="0.5">
            <span class="threshold-value" id="threshold-value">0.50</span>
          </div>
        </div>

        <!-- 聚合策略 -->
        <div class="form-group">
          <label>聚合策略</label>
          <div class="strategy-options">
            <div class="strategy-option">
              <input type="radio" id="strategy-any" name="strategy" value="any" checked>
              <label for="strategy-any">
                <i class="fas fa-bolt"></i><br>
                ANY<br>
                <small>命中任一即判定</small>
              </label>
              <button class="strategy-help-btn" onclick="ModalManager.showStrategyDescription('any')" title="ANY策略说明">
                <i class="fas fa-question-circle"></i>
              </button>
            </div>
            <div class="strategy-option">
              <input type="radio" id="strategy-weighted" name="strategy" value="weighted">
              <label for="strategy-weighted">
                <i class="fas fa-calculator"></i><br>
                WEIGHTED<br>
                <small>概率加权平均</small>
              </label>
              <button class="strategy-help-btn" onclick="ModalManager.showStrategyDescription('weighted')" title="WEIGHTED策略说明">
                <i class="fas fa-question-circle"></i>
              </button>
            </div>
          </div>
        </div>

        <!-- 操作按钮 -->
        <div class="button-group">
          <button class="btn btn-primary" onclick="AppController.runScan()">
            <i class="fas fa-search"></i>
            开始扫描
          </button>
          <button class="btn btn-primary" onclick="AppController.runEval()">
            <i class="fas fa-chart-bar"></i>
            开始评测
          </button>
        </div>
      </section>

      <section>
        <h2><i class="fas fa-shield-alt"></i> 规则源</h2>
        <div id="rules">
          <div class="loading-placeholder">加载中...</div>
        </div>
      </section>

      <section>
        <h2><i class="fas fa-brain"></i> 模型</h2>
        <div id="models">
          <div class="loading-placeholder">加载中...</div>
        </div>
      </section>
    </aside>

    <section>
      <h2><i class="fas fa-chart-line"></i> 检测结果</h2>
      <div id="result">
        <div class="empty-state">
          <i class="fas fa-search"></i>
          <p>请输入URL并点击"开始扫描"进行检测</p>
        </div>
      </div>
    </section>
  </main>

  <!-- 弹窗组件 -->
  <div id="descriptionModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="modalTitle">详细信息</h3>
        <button class="modal-close" onclick="ModalManager.closeModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body" id="modalBody">
        <!-- 动态内容 -->
      </div>
    </div>
  </div>

  <!-- 历史记录弹窗 -->
  <div id="historyModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">历史记录</h3>
        <button class="modal-close" onclick="HistoryManager.hide()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="history-sections">
          <div class="history-section">
            <h4><i class="fas fa-exclamation-triangle text-danger"></i> 钓鱼网站测试用例</h4>
            <div class="history-url-list" id="phishingUrls">
              <!-- 动态加载 -->
            </div>
          </div>
          <div class="history-section">
            <h4><i class="fas fa-shield-alt text-success"></i> 正常网站测试用例</h4>
            <div class="history-url-list" id="legitimateUrls">
              <!-- 动态加载 -->
            </div>
          </div>
        </div>
        <div class="history-actions">
          <button class="btn btn-primary" onclick="HistoryManager.addAllPhishing()">
            <i class="fas fa-plus"></i> 添加所有钓鱼网站
          </button>
          <button class="btn btn-primary" onclick="HistoryManager.addAllLegitimate()">
            <i class="fas fa-plus"></i> 添加所有正常网站
          </button>
          <button class="btn btn-secondary" onclick="HistoryManager.clearInput()">
            <i class="fas fa-eraser"></i> 清空输入框
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript文件 -->
  <script src="/static/js/modal.js"></script>
  <script src="/static/js/app.js"></script>
</body>
</html>